:root {
  --bg1: #0f172a;
  --bg2: #1e293b;
  --primary: #7c3aed;
  --primary-600: #6d28d9;
  --danger: #ef4444;
  --muted: #94a3b8;
  --glass: rgba(255,255,255,0.08);
  --warn: #f59e0b;
}

* { box-sizing: border-box; }
html, body, #root { height: 100%; }
body { margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji"; overflow: hidden; }

.ct-root { min-height: 100vh; background: radial-gradient(1000px 600px at 20% -10%, #201f42 0%, transparent 70%), radial-gradient(800px 400px at 100% 0%, #2b194f 0%, transparent 70%), linear-gradient(180deg, var(--bg1) 0%, var(--bg2) 100%); color: #e5e7eb; position: relative; }

.ct-banner { position: sticky; top: 0; z-index: 20; background: rgba(245, 158, 11, 0.12); border-bottom: 1px solid rgba(245,158,11,0.35); color: #fde68a; padding: 10px 16px; text-align: center; font-size: 13px; backdrop-filter: blur(6px); }

.ct-bg-video { position: fixed; inset: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0.15; pointer-events: none; z-index: 0; }

.ct-header { text-align: center; padding: 28px 16px 8px; position: relative; z-index: 1; }
.ct-header-row { display: flex; align-items: center; justify-content: space-between; gap: 12px; }
.ct-header-actions { display: flex; align-items: center; gap: 10px; }
.ct-title { font-size: 28px; font-weight: 800; letter-spacing: 0.2px; }
.ct-sub { font-size: 14px; color: var(--muted); margin-top: 6px; }

/* Settings Panel */
.ct-settings-panel { position: fixed; top: 0; right: 0; width: min(400px, 90vw); height: 100vh; background: rgba(15,23,42,0.95); border-left: 1px solid rgba(148,163,184,0.12); backdrop-filter: blur(12px); z-index: 30; overflow-y: auto; }
.ct-settings-content { padding: 20px; }
.ct-settings-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; }
.ct-settings-header h3 { margin: 0; font-size: 18px; }
.ct-settings-section { margin-bottom: 24px; }
.ct-settings-section h4 { margin: 0 0 12px 0; font-size: 14px; color: var(--muted); text-transform: uppercase; letter-spacing: 1px; }

/* Desktop */
.ct-desktop { position: fixed; inset: 0; z-index: 1; padding-top: 100px; }

/* Draggable Apps */
.ct-app-icon { width: 100px; height: 100px; border-radius: 16px; border: 1px solid rgba(255,255,255,0.22); display: flex; flex-direction: column; align-items: center; justify-content: center; box-shadow: 0 10px 30px rgba(0,0,0,0.35); cursor: grab; transition: all 0.2s ease; padding: 8px; user-select: none; }
.ct-app-icon:hover { transform: translateY(-2px) scale(1.02); box-shadow: 0 14px 36px rgba(0,0,0,0.45); border-color: rgba(255,255,255,0.35); }
.ct-app-icon:active { transform: scale(0.98); }

.ct-draggable-app { position: absolute; }
.ct-draggable-app.dragging { cursor: grabbing; z-index: 1000; }

.ct-app-icon-content { display: flex; flex-direction: column; align-items: center; gap: 6px; }
.ct-app-icon-symbol { font-size: 24px; font-weight: 800; filter: drop-shadow(0 2px 6px rgba(0,0,0,0.4)); }
.ct-app-icon-name { font-size: 11px; font-weight: 600; color: #ffffff; text-align: center; text-shadow: 0 1px 3px rgba(0,0,0,0.5); line-height: 1.2; }

.ct-remove-app { position: absolute; top: -6px; right: -6px; width: 20px; height: 20px; border-radius: 50%; background: var(--danger); color: white; border: none; cursor: pointer; font-size: 14px; font-weight: 700; display: flex; align-items: center; justify-content: center; z-index: 10; box-shadow: 0 2px 6px rgba(0,0,0,0.4); }
.ct-remove-app:hover { background: #dc2626; transform: scale(1.1); }

/* Session View */
.ct-session-view { position: fixed; inset: 0; z-index: 10; background: #000; }

.ct-browser-container { width: 100%; height: 100%; position: relative; }
.ct-browser-fullscreen { position: fixed; inset: 0; z-index: 40; }

.ct-browser { width: 100%; height: 100%; position: relative; background: #000; }

.ct-browser-iframe { width: 100%; height: 100%; border: 0; background: #000; object-fit: cover; }

.ct-hyperbeam-mount { width: 100%; height: 100%; background: #000; }
.ct-hyperbeam-mount > * { width: 100% !important; height: 100% !important; object-fit: cover !important; }

/* Session Controls */
.ct-session-controls { position: absolute; top: 20px; left: 20px; z-index: 50; display: flex; gap: 8px; background: rgba(2,6,23,0.9); border: 1px solid rgba(255,255,255,0.14); border-radius: 12px; padding: 8px; backdrop-filter: blur(8px); }
.ct-session-controls-fullscreen { position: fixed; }

.ct-session-info { position: absolute; bottom: 20px; left: 20px; background: rgba(16,185,129,0.12); border: 1px solid rgba(16,185,129,0.35); color: #bbf7d0; font-size: 11px; padding: 6px 10px; border-radius: 8px; font-weight: 600; z-index: 50; }

/* Form elements */
.ct-field { display: flex; flex-direction: column; margin-bottom: 12px; }
.ct-field label { font-size: 12px; color: var(--muted); margin-bottom: 6px; }
.ct-field input, .ct-field select { background: rgba(2,6,23,0.6); color: #e5e7eb; border: 1px solid rgba(148,163,184,0.18); border-radius: 10px; height: 42px; padding: 0 12px; outline: none; }
.ct-field input:focus, .ct-field select:focus { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.25); }

.ct-toggle { display: inline-flex; align-items: center; gap: 8px; font-size: 13px; color: #cbd5e1; margin-bottom: 12px; }

.ct-join { display: flex; gap: 8px; }
.ct-join input { flex: 1; }

.btn { height: 42px; border-radius: 10px; border: 1px solid transparent; padding: 0 14px; font-weight: 700; cursor: pointer; font-size: 14px; }
.btn.primary { background: var(--primary); color: white; }
.btn.primary:hover { background: var(--primary-600); }
.btn.danger { background: var(--danger); color: white; }
.btn.ghost { background: rgba(255,255,255,0.08); color: #e5e7eb; border-color: rgba(255,255,255,0.14); }
.btn:disabled { opacity: 0.6; cursor: not-allowed; }

.ct-alert { margin-top: 10px; border-radius: 10px; padding: 10px 12px; font-size: 13px; }
.ct-alert.error { background: rgba(239,68,68,0.12); border: 1px solid rgba(239,68,68,0.35); color: #fecaca; }
.ct-alert.success { background: rgba(16,185,129,0.12); border: 1px solid rgba(16,185,129,0.35); color: #bbf7d0; }

/* Quick background selector */
.ct-bg-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(60px, 1fr)); gap: 8px; margin-bottom: 12px; }
.ct-bg-thumb { width: 100%; height: 45px; border-radius: 8px; border: 2px solid rgba(255,255,255,0.1); background-size: cover; background-position: center; cursor: pointer; display: flex; align-items: end; transition: all 0.2s ease; position: relative; overflow: hidden; }
.ct-bg-thumb:hover { border-color: rgba(255,255,255,0.3); transform: scale(1.02); }
.ct-bg-thumb.active { border-color: var(--primary); box-shadow: 0 0 0 2px rgba(124, 58, 237, 0.3); }
.ct-bg-name { background: rgba(0,0,0,0.7); color: white; font-size: 9px; padding: 2px 4px; border-radius: 4px 4px 0 0; width: 100%; text-align: center; font-weight: 600; }

.ct-mock-label { position: absolute; top: 10px; left: 10px; background: rgba(245, 158, 11, 0.18); border: 1px solid rgba(245,158,11,0.45); color: #fde68a; font-weight: 700; padding: 4px 8px; border-radius: 8px; letter-spacing: .6px; z-index: 60; }

/* Chat head */
.ct-chat-head { position: absolute; z-index: 50; border-radius: 9999px; display: grid; place-items: center; box-shadow: 0 10px 25px rgba(0,0,0,0.35); border: 2px solid rgba(255,255,255,0.3); user-select: none; touch-action: none; }
.ct-chat-initial { font-weight: 800; color: white; text-shadow: 0 2px 8px rgba(0,0,0,0.5); }
.ct-resizer { position: absolute; right: -6px; bottom: -6px; width: 16px; height: 16px; border-radius: 4px; background: rgba(255,255,255,0.8); box-shadow: 0 2px 6px rgba(0,0,0,0.3); cursor: nwse-resize; }

/* Chat panel */
.ct-chat-panel { position: absolute; left: 12px; bottom: 12px; z-index: 55; display: flex; flex-direction: column; gap: 8px; }
.ct-chat-panel-fullscreen { position: fixed; left: 20px; bottom: 20px; right: 20px; width: auto; max-width: 400px; }
.ct-chat-window { width: min(360px, 90vw); background: rgba(2,6,23,0.9); border: 1px solid rgba(255,255,255,0.14); border-radius: 12px; overflow: hidden; backdrop-filter: blur(8px); }
.ct-chat-messages { max-height: 200px; overflow: auto; padding: 12px; display: flex; flex-direction: column; gap: 8px; }
.ct-chat-item { display: flex; gap: 8px; align-items: center; font-size: 14px; }
.ct-chat-tag { width: 24px; height: 24px; border-radius: 9999px; display: inline-grid; place-items: center; color: white; font-size: 12px; flex-shrink: 0; }
.ct-chat-text { color: #e5e7eb; }
.ct-chat-empty { text-align: center; padding: 12px; color: var(--muted); font-size: 13px; }
.ct-chat-input { display: flex; gap: 8px; border-top: 1px solid rgba(255,255,255,0.1); padding: 8px; }
.ct-chat-input input { flex: 1; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.14); border-radius: 8px; height: 38px; color: #e5e7eb; padding: 0 12px; }

.ct-footer { position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); text-align: center; color: var(--muted); font-size: 12px; z-index: 2; white-space: nowrap; }

/* Mobile responsiveness */
@media (max-width: 768px) {
  .ct-settings-panel { width: 100vw; }
  .ct-app-icon { width: 80px; height: 80px; }
  .ct-app-icon-symbol { font-size: 20px; }
  .ct-app-icon-name { font-size: 10px; }
  .ct-bg-grid { grid-template-columns: repeat(auto-fit, minmax(50px, 1fr)); gap: 6px; }
  .ct-bg-thumb { height: 35px; }
  .ct-chat-panel-fullscreen { left: 10px; bottom: 10px; right: 10px; max-width: none; }
  .ct-session-controls { top: 10px; left: 10px; }
}